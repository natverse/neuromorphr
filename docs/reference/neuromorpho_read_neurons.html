<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Read neurons from neuromorpho.org — neuromorpho_read_neurons • neuromorphr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Read neurons from neuromorpho.org — neuromorpho_read_neurons"><meta property="og:description" content="Read standardised neurons from neuromorpho.org, given a single, or vector of, neuron ID or neuron name. 
Neurons can be returned as SWC-style data frames or as a nat package neuron/neuronlist object, 
that can be be plotted in 3D using rgl and analysed with tools from the nat ecosystem. Each neuron
in the neuromorpho repository is represented by a name, general information (metadata), 
the original and standardised SWC files of the digital morphological reconstruction 
(see details on standardisation process),
and a set of morphometric features (see details on available measures)."><meta property="og:image" content="/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">neuromorphr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/plot-neuromorpho-neurons.html">plot-neuromorpho-neurons</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/natverse/neuromorphr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Read neurons from neuromorpho.org</h1>
    <small class="dont-index">Source: <a href="https://github.com/natverse/neuromorphr/blob/HEAD/R/neurons.R" class="external-link"><code>R/neurons.R</code></a></small>
    <div class="hidden name"><code>neuromorpho_read_neurons.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Read standardised neurons from neuromorpho.org, given a single, or vector of, neuron ID or neuron name. 
Neurons can be returned as SWC-style data frames or as a <code>nat</code> package neuron/neuronlist object, 
that can be be plotted in 3D using <code>rgl</code> and analysed with tools from the <code>nat</code> ecosystem. Each neuron
in the neuromorpho repository is represented by a name, general information (metadata), 
the original and standardised SWC files of the digital morphological reconstruction 
(see details on <a href="http://neuromorpho.org/StdSwc1.21.jsp" class="external-link">standardisation process</a>),
and a set of morphometric features (see details on available <a href="http://neuromorpho.org/myfaq.jsp?id=qr4#QS3" class="external-link">measures</a>).</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">neuromorpho_read_neurons</span><span class="op">(</span></span>
<span>  neuron_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  neuron_id <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  nat <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  batch.size <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  meta <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  light <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  find <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  neuromorpho_url <span class="op">=</span> <span class="st">"http://neuromorpho.org"</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">neuromorpho_read_neuron</span><span class="op">(</span></span>
<span>  neuron_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  neuron_id <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  nat <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  neuromorpho_url <span class="op">=</span> <span class="st">"http://neuromorpho.org"</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>neuron_name</dt>
<dd><p>a neuron name, or vector of neuron names, as recorded in the neuromorpho database. Names and neuron IDs 
can be found by searching the repository, for example via <code>neuromorpho_search</code></p></dd>


<dt>neuron_id</dt>
<dd><p>a neuron ID, or vector of neuron IDs, as recorded in the neuromorpho database. If neuron_name is given
this supersedes <code>neuron_id</code>, which is then treated as if its value were <code>NULL</code>.</p></dd>


<dt>nat</dt>
<dd><p>if TRUE, neurons are returned formatted as a <code><a href="https://rdrr.io/pkg/nat/man/neuron.html" class="external-link">neuron</a></code> object, in a <code><a href="https://rdrr.io/pkg/nat/man/neuronlist.html" class="external-link">neuronlist</a></code> 
See details for more information. Otherwise, a data frame is returned in the <a href="http://www.neuronland.org/NLMorphologyConverter/MorphologyFormats/SWC/Spec.html" class="external-link">SWC</a> file type format.
If TRUE, the resulting neuronlist object's associated meta data will be pulled using <code>neuromorpho_neuron_meta</code></p></dd>


<dt>batch.size</dt>
<dd><p>the number of requests sent at once to the neuromorpho.org, using <code><a href="https://rdrr.io/pkg/curl/man/multi.html" class="external-link">multi_run</a></code>. 
Requests are sent to neuromorpho.org in parallel to speed up the process of reading neurons. Batches of queries are processed serially.
Increasing the value of <code>batch.size</code> may reduce read time.</p></dd>


<dt>meta</dt>
<dd><p>if TRUE, meta data is retrieved for the returned <code>neuronlist</code> or <code>list</code> object, 
using <code>neuromorpho_neuron_meta</code>.</p></dd>


<dt>light</dt>
<dd><p>if TRUE, the only a subset of the full meta data for each neurons is returned with the resulting <code><a href="https://rdrr.io/pkg/nat/man/neuronlist.html" class="external-link">neuronlist</a></code>.</p></dd>


<dt>find</dt>
<dd><p>if TRUE, then we scrape each neuron's webpage to find the correct link to download its SWC file. This is more stable, but more time consuming, 
than setting <code>find = FALSE</code> and using the standard neuromorpho.org format for the download link. If the database changes, or you cannot find your neuron 
even though you know it exists, try setting <code>find = TRUE</code></p></dd>


<dt>progress</dt>
<dd><p>if <code>TRUE</code> or a numeric value, a progress bar is shown. 
The bar progresses when each batch is completed.
If <code>TRUE</code>, or <code>100</code>, the bar completes where all batches are done.</p></dd>


<dt>neuromorpho_url</dt>
<dd><p>the base URL for querying the neuromorpho database, defaults to <a href="http://neuromorpho.org" class="external-link">http://neuromorpho.org</a></p></dd>


<dt>...</dt>
<dd><p>methods passed to <code>neuromorpho_async_req</code>, or in some cases, <code>neuromorphr:::neuromorpho_fetch</code></p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>if <code>nat = TRUE</code>, then a neuronlist object is returned. 
If FALSE, then a list of data frames for neuron morphologies in 
<a href="http://www.neuronland.org/NLMorphologyConverter/MorphologyFormats/SWC/Spec.html" class="external-link">SWC</a> format are returned.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>A single neuron can be read using using <code>neuromorpho_read_neuron</code>,
 or multiple using <code>neuromorpho_read_neurons</code>. If <code>nat = TRUE</code>, 
 then neurons are returned as a <code><a href="https://rdrr.io/pkg/nat/man/neuron.html" class="external-link">neuron</a></code> object,
 If multiple neurons are returned, they will be given together in a <code><a href="https://rdrr.io/pkg/nat/man/neuronlist.html" class="external-link">neuronlist</a></code>. 
 This format and its manipulation is described in detail <a href="https://jefferis.github.io/nat/" class="external-link">here</a>.
 When using <code>neuromorpho_read_neurons</code>, meta data for the neuron is also returned
 using <code><a href="neuromorpho_neurons_meta.html">neuromorpho_neuron_meta</a></code>. If <code>light = TRUE</code>, 
 then only a subset of this metadata is returned, i.e. the fields: 
 <code>neuron_id</code> 
 <code>neuron_name</code> 
 <code>species</code> 
 <code>brain_region</code>
 <code>cell_type</code> 
 <code>archive</code> .
 Note that since neurons are reconstructed from many different neural systems and species, 
 there is no 'standard' orientation. Instead, neuromorpho.org's standardisation process orients the 
 morphologies by placing the soma in the origin of coordinates and aligning the first three principal 
 components of all XYZ coordinates with heights, width, and depth.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="neuromorpho_neurons_info.html">neuromorpho_neurons_info</a></code>, <code><a href="neuromorpho_neurons_meta.html">neuromorpho_neurons_meta</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span>  <span class="co"># Let's get all the elephant neurons in the repository</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## First, we need to find their names or IDs</span></span></span>
<span class="r-in"><span><span class="va">elephant.df</span> <span class="op">=</span> <span class="fu"><a href="neuromorpho_search.html">neuromorpho_search</a></span><span class="op">(</span>search_terms<span class="op">=</span><span class="st">"species:elephant"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Let's see what cell types we have here</span></span></span>
<span class="r-in"><span><span class="va">t</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">elephant.df</span><span class="op">$</span><span class="va">cell_type</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in table(elephant.df$cell_type):</span> object 'elephant.df' not found</span>
<span class="r-in"><span><span class="va">t</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> function (x) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> UseMethod("t")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;bytecode: 0x7fbf8bceb380&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;environment: namespace:base&gt;</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## We have many pyramidal cells. Let's get those.</span></span></span>
<span class="r-in"><span><span class="va">neuron_names</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">elephant.df</span>, <span class="va">cell_type</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">t</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.min.html" class="external-link">which.max</a></span><span class="op">(</span><span class="va">t</span><span class="op">)</span><span class="op">]</span><span class="op">)</span><span class="op">$</span><span class="va">neuron_name</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in subset(elephant.df, cell_type == names(t)[which.max(t)]):</span> object 'elephant.df' not found</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Now we are ready to read some neurons!</span></span></span>
<span class="r-in"><span><span class="va">elephant.principal.cells</span> <span class="op">=</span> <span class="fu">neuromorpho_read_neurons</span><span class="op">(</span>neuron_name <span class="op">=</span> <span class="va">neuron_names</span>, nat <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in neuromorpho_read_neurons(neuron_name = neuron_names, nat = TRUE):</span> object 'neuron_names' not found</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Great, now we can plot them</span></span></span>
<span class="r-in"><span><span class="fu">nopen3d</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in nopen3d():</span> could not find function "nopen3d"</span>
<span class="r-in"><span><span class="fu">plot3d</span><span class="op">(</span><span class="va">elephant.principal.cells</span>, soma<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in plot3d(elephant.principal.cells, soma = T):</span> could not find function "plot3d"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## And get some summary information on the skeleton we have retrieved</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">elephant.principal.cells</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in summary(elephant.principal.cells):</span> object 'elephant.principal.cells' not found</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Alexander Bates.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

